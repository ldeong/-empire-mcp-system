###############################################
# MCP Ecosystem Configuration - Example .env  #
###############################################

# Copy this file to .env and fill in your actual values
API_KEY=your_api_key_here


# Cloudflare Worker Configuration
CLOUDFLARE_WORKER_URL=https://your-worker.your-subdomain.workers.dev

# GitHub API Configuration
GITHUB_TOKEN=your_github_personal_access_token_here

# Asana API Configuration
ASANA_TOKEN=your_asana_personal_access_token_here

# SINA Webhook Configuration
SINA_WEBHOOK_URL=https://your-webhook-endpoint.com/webhook

# Optional: Additional API Keys for enhanced functionality
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Server Configuration
PORT=3000
NODE_ENV=development

# Logging Configuration
LOG_LEVEL=info
LOG_FILE=mcp-system.log

# Security Configuration
JWT_SECRET=your_jwt_secret_here
API_RATE_LIMIT=100

# Database Configuration (if using database)
DATABASE_URL=your_database_connection_string_here

# ==============================================
# üè¶ Internal Crypto Wallet / Ledger Bankless Mode
# ==============================================
# Master passphrase used to encrypt locally stored agent wallets (AES-256-GCM)
WALLET_MASTER_PASSPHRASE=change_this_master_passphrase

# Default currencies agents may use (comma separated). Purely advisory metadata for ledger.
LEDGER_ALLOWED_CURRENCIES=USDT,BTC,MONERO,STABLE_CREDITS

# Automatic reinvestment allocation (percentages must sum <= 100)
REINVEST_SCALE_PERCENT=60
REINVEST_INFRA_PERCENT=30
REINVEST_RESERVE_PERCENT=10

# Minimum balance (in credits) before triggering auto reinvest evaluation
REINVEST_MIN_THRESHOLD=25

# Path for local JSON ledger file (Node side). In Workers environment this maps to KV/D1.
LOCAL_LEDGER_FILE=./data/empire-ledger.json

# Toggle experimental staking simulation (no external chain interaction)
ENABLE_STAKING_SIMULATION=true

# Audit log retention (days) for local file trimming routine
AUDIT_LOG_RETENTION_DAYS=30

# ==============================================
# ‚öôÔ∏è  Debug / Observability Enhancements
# ==============================================
DEBUG_VERBOSE=true
DEBUG_INCLUDE_STACK=true

###############################################
# ‚öôÔ∏è Autonomous Reinvestment Engine Variables  #
###############################################
# Minimum balance (credits) before evaluating a reinvest cycle (financial-ledger)
REINVEST_THRESHOLD=100
# Cost per spawned autonomous agent (internal budgeting units)
REINVEST_AGENT_COST=5
# Upper bound to prevent runaway spawning
MAX_AUTO_AGENTS=25
# If true: evaluation immediately executes cycle when threshold reached
INVESTMENT_AUTO_EXECUTE=false
# Allocation ratios (must sum <= 1.0)
AGENT_SPAWN_ALLOCATION=0.6
INFRASTRUCTURE_ALLOCATION=0.3
RESERVES_ALLOCATION=0.1

###############################################
# ‚è± Cron & Accountability Layer               #
###############################################
# Master switch for internal cron dispatcher (Node side)
ENABLE_CRON_SCHEDULER=true
# Olson timezone name used for scheduling & summaries
CRON_TIMEZONE=UTC
# Max retry attempts per failed cron task before escalation
MAX_CRON_RETRIES=3
# Hour (0-23) to generate daily accountability summary
CRON_DAILY_SUMMARY_HOUR=23
# Day of week (0=Sunday) for weekly report generation
CRON_WEEKLY_SUMMARY_DAY=0
# Enable central dispatcher (multi-agent) orchestration logic
ENABLE_CENTRAL_CRON_DISPATCHER=true
# Optional external dispatcher (e.g., Cloudflare Worker endpoint)
CRON_DISPATCHER_WORKER_URL=
# Safe mode stops execution after first failure in a chain
CRON_SAFE_MODE=false

###############################################
# üîé Leads Pipeline                            #
###############################################
# Max in-memory + persisted backlog before pruning / archiving
LEADS_MAX_BACKLOG=500
# Primary pipeline / scoring ledger file
LEADS_LEDGER_FILE=./data/leads-ledger.json
# Qualification threshold (0-100) to mark lead as qualified
LEAD_QUALIFICATION_THRESHOLD=70
# Flag top N percent of leads for fast-lane processing
LEAD_TOP_PERCENT_FLAG=20
# KPI regeneration interval (minutes)
PIPELINE_KPI_INTERVAL_MIN=240

###############################################
# üí∞ Real Income Validation / Blockchain       #
###############################################
# Master toggle: when true, revenue endpoints demand txid / payout proof
ENABLE_REAL_INCOME_MODE=false
# Encryption master key for real wallet engine (distinct from passphrase above)
WALLET_MASTER_KEY=change_this_wallet_master_key
# Network selectors / API keys
BTC_NETWORK=testnet
ETHERSCAN_API_KEY=your_etherscan_key_here
BLOCKSTREAM_API_BASE=https://blockstream.info/testnet/api
BLOCKSTREAM_API_KEY=
BITCOIN_EXPLORER_BASE=https://mempool.space/testnet
ETH_EXPLORER_BASE=https://sepolia.etherscan.io
TRON_EXPLORER_BASE=https://tronscan.org
XMR_EXPLORER_BASE=https://localmonero.co/blocks
USDT_CONTRACT_ADDRESS=0xdAC17F958D2ee523a2206206994597C13D831ec7
# Daily balance verification cron (mirrors Central Cron if enabled)
BALANCE_VERIFICATION_CRON=0 6 * * *

###############################################
# ‚òÅÔ∏è Cloudflare Workers / Wrangler / Orchestrator
###############################################
# Cloudflare account + API token for automated deployments
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_API_TOKEN=
# Logical prefix for generated worker names (e.g., sina-empire)
CF_WORKER_PREFIX=sina-empire
# Deployment environment label (e.g. production / staging)
WORKER_DEPLOY_ENV=production
# Auto scaling hints (inform orchestrator ‚Äì not native Workers autoscale)
WORKER_AUTOSCALE_MIN=2
WORKER_AUTOSCALE_MAX=8
# Health check & failover tuning (seconds)
WORKER_HEALTH_INTERVAL_SEC=300
WORKER_FAILOVER_THRESHOLD_SEC=30
# Default instance targets per agent archetype (comma list key:value)
AGENT_DEFAULT_INSTANCES=genealogy_researcher:2,voice_ai_specialist:2,lead_scraper:3

###############################################
# üìä Dashboard / Metrics / Alerts              #
###############################################
# Poll/refresh interval for realtime dashboard (seconds)
DASHBOARD_REFRESH_INTERVAL_SEC=5
# Webhook for alert dispatch (Slack, Discord, etc.)
ALERT_WEBHOOK_URL=
# Enable voice alert integration for critical failures
ALERT_VOICE_ENABLED=false
# Revenue decline alert threshold (% drop vs 7d avg)
REVENUE_ALERT_DECLINE_THRESHOLD=30
# Wallet rapid drop threshold (% over observation window)
WALLET_DROP_THRESHOLD_PERCENT=20

###############################################
# üîê Extended Security & API Policy            #
###############################################
# HTTP header key used for internal API key auth
API_KEY_HEADER=X-EMPIRE-API-KEY
# Comma separated origins allowed for dashboard / API
ALLOWED_ORIGINS=http://localhost:3000
# Rate limiting override window (minutes)
RATE_LIMIT_WINDOW_MIN=15
# Max requests per IP within window
RATE_LIMIT_MAX_REQUESTS=500

###############################################
# üß™ Feature Toggles / Experimental            #
###############################################
ENABLE_BALANCE_CHECKER_AGENT=true
ENABLE_LEAD_PIPELINE_ENGINE=true
ENABLE_WORKER_ORCHESTRATOR=true
ENABLE_AUTONOMOUS_REINVESTMENT=true
ENABLE_AGENT_JOB_QUEUE=true

###############################################
# üóÑ Backup & Snapshot                          #
###############################################
# Auto backup real wallet & ledgers on verified income event
ENABLE_LEDGER_BACKUP_ON_INCOME=true
# Backup destination directory
BACKUP_DIR=./backups
# Number of days to retain backups
BACKUP_RETENTION_DAYS=14

###############################################
# üßµ Observability Structured Logging          #
###############################################
# Emit JSON structured logs (true/false)
LOG_JSON=true
# Include correlation / run IDs in logs
LOG_INCLUDE_REQUEST_IDS=true

###############################################
# ‚úÖ Integrity / Validation Gates              #
###############################################
# Require txid for revenue insertion in real mode
REQUIRE_TXID_FOR_REVENUE=true
# Minimum blockchain confirmations before marking revenue confirmed
MIN_BLOCK_CONFIRMATIONS=1
# Allow pending revenue entries prior to confirmation
ALLOW_PENDING_REVENUE=true

###############################################
# üì¶ Internal File References (override)       #
###############################################
FINANCIAL_LEDGER_FILE=./data/financial-ledger.json
REINVEST_CYCLES_FILE=./data/reinvestment-cycles.json
JOBS_QUEUE_FILE=./data/jobs.json
ACTIVE_AGENTS_FILE=./data/active-agents.json
CRON_RUNS_FILE=./data/cron-runs.json

###############################################
# üß† Intelligence / Optimization Flags         #
###############################################
ENABLE_PREDICTIVE_SCALING=false
ENABLE_ANOMALY_DETECTION=false
ENABLE_COST_OPTIMIZATION_REPORTS=false

###############################################
# END OF FILE                                  #
###############################################

###############################################
# ‚öôÔ∏è Autonomous Reinvestment Engine Variables  #
###############################################
REINVEST_THRESHOLD=100
REINVEST_AGENT_COST=5
MAX_AUTO_AGENTS=25
INVESTMENT_AUTO_EXECUTE=false
AGENT_SPAWN_ALLOCATION=0.6
INFRASTRUCTURE_ALLOCATION=0.3
RESERVES_ALLOCATION=0.1

###############################################
# ‚è± Cron & Accountability Layer               #
###############################################
ENABLE_CRON_SCHEDULER=true
CRON_TIMEZONE=UTC
MAX_CRON_RETRIES=3
CRON_DAILY_SUMMARY_HOUR=23
CRON_WEEKLY_SUMMARY_DAY=0

###############################################
# üîé Leads Pipeline                            #
###############################################
LEADS_MAX_BACKLOG=500
LEADS_LEDGER_FILE=./data/leads-ledger.json

###############################################
# üí∞ Real Income Validation / Blockchain       #
###############################################
ENABLE_REAL_INCOME_MODE=false
ETHERSCAN_API_KEY=your_etherscan_key_here
BLOCKSTREAM_API_BASE=https://blockstream.info/testnet/api
BITCOIN_EXPLORER_BASE=https://mempool.space/testnet
ETH_EXPLORER_BASE=https://sepolia.etherscan.io
TRON_EXPLORER_BASE=https://tronscan.org
XMR_EXPLORER_BASE=https://localmonero.co/blocks
